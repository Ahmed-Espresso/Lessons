<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title data-i18n="student.title"> Ø§Ù„Ø·Ø§Ù„Ø¨ - Ù…Ø±ÙƒØ² Ø§Ù„Ø¹Ø¨ÙŠØ±</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="student.css">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&display=swap" rel="stylesheet">
    <script>
    (function(){
        const html = document.documentElement;
        let savedTheme = localStorage.getItem('theme');
        if (!savedTheme || !['night', 'apple', 'wine', 'coffee', 'space', 'water', 'wild'].includes(savedTheme)) {
            savedTheme = 'apple';
            localStorage.setItem('theme', savedTheme);
        }
        html.classList.add(`theme-${savedTheme}`);
        html.style.visibility = 'visible';
        window.currentTheme = savedTheme;
    })();
    </script>
</head>
<body class="student-page">

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ù„Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© -->
    <div id="internal-loading" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <i class="fas fa-user-graduate"></i>
            </div>
            <div class="loading-progress-container">
                <div class="loading-progress-bar">
                    <div class="loading-progress-fill"></div>
                </div>
                <div class="loading-progress-text">0%</div>
            </div>
            <div class="loading-message" data-i18n="loading.message">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨...</div>
            <div class="loading-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>

    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <header id="navsec">
        <nav id="nav">
            <div id="nav-btn">
                <!-- Ø²Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
                <button id="toggle-home-btn" class="nav-btn__item">
                    <i class="fas fa-home"></i>
                    <span id="home-label" data-i18n="nav.home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </button>
                
                <!-- Ø²Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ -->
                <button id="logout-btn" class="nav-btn__item">
                    <i class="fas fa-sign-out-alt"></i>
                    <span data-i18n="nav.logout"> Ø§Ù„Ø®Ø±ÙˆØ¬</span>
                </button>
                
                <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ© -->
                <button id="language-toggle" class="nav-btn__item" aria-label="Toggle Language">
                    <i class="fas fa-language"></i>
                    <span id="language-label" data-i18n="nav.language">En</span>
                </button>
                
                <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… -->
                <button id="theme-toggle" class="nav-btn__item" aria-label="Toggle Mode">
                    <i class="fas fa-moon"></i>
                    <span id="theme-label" data-i18n="nav.theme">Ø§Ù„Ø«ÙŠÙ…</span>
                </button>
            </div>
        </nav>
    </header>

    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
    <main class="main-content">
        <div class="student-content" style="display: none;">
            <!-- Ø±Ø£Ø³ Ø§Ù„Ø·Ø§Ù„Ø¨ -->
            <div class="student-header">
                <h1>
                    <div style="display: inline-flex; align-items: center; gap: 10px;">
                        <i class="fas fa-user-graduate"></i>
                        <span data-i18n="student.welcome">Ù…Ø±Ø­Ø¨Ø§Ù‹</span>
                        <span id="student-name-display"> Ø§Ù„Ø·Ø§Ù„Ø¨</span>
                    </div>
                </h1>
            </div>
            
            <!-- ==================== Ø´Ø¨ÙƒØ© Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø·Ø§Ù„Ø¨ ==================== -->
            <div class="sections-grid" id="student-sections-grid">
                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© -->
                <div class="section-card" data-section="subjects-section">
                    <i class="fas fa-book"></i>
                    <h3 data-i18n="student.tabs.subjects">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h3>
                    <span class="section-badge" id="subjects-badge">0</span>
                </div>
                
                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø­Ø§Ø¶Ø±Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© -->
                <div class="section-card" data-section="lectures-section">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <h3 data-i18n="student.tabs.lectures">Ù…Ø­Ø§Ø¶Ø±Ø§ØªÙŠ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</h3>
                    <span class="section-badge" id="lectures-badge">0</span>
                </div>
                
                <!-- Ù‚Ø³Ù… Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª -->
                <div class="section-card" data-section="exams-section">
                    <i class="fas fa-file-alt"></i>
                    <h3 data-i18n="student.tabs.exams">Ø§Ø®ØªØ¨Ø§Ø±Ø§ØªÙŠ</h3>
                    <span class="section-badge" id="exams-badge">0</span>
                </div>
                
                <!-- Ù‚Ø³Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
                <div class="section-card" data-section="results-section">
                    <i class="fas fa-chart-line"></i>
                    <h3 data-i18n="student.tabs.results">Ù†ØªØ§Ø¦Ø¬ÙŠ</h3>
                    <span class="section-badge" id="results-badge">0</span>
                </div>
                
                <!-- Ù‚Ø³Ù… Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª -->
                <div class="section-card" data-section="groups-section">
                    <i class="fas fa-users"></i>
                    <h3 data-i18n="student.tabs.groups">Ù…Ø¬Ù…ÙˆØ¹Ø§ØªÙŠ</h3>
                    <span class="section-badge" id="groups-badge">0</span>
                </div>

                <!-- Ù‚Ø³Ù… Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø¹Ø§Ù… -->
                <div class="section-card" data-section="chat-section">
                    <i class="fas fa-comments"></i>
                    <h3 data-i18n="student.tabs.chat">Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø¹Ø§Ù…</h3>
                </div>

            </div>
            
            <!-- ==================== ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ==================== -->
            <div class="student-result-container" id="student-result-container">
                <!-- Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù‚Ø¨Ù„ Ø§Ø®ØªÙŠØ§Ø± Ù‚Ø³Ù… -->
                <div class="result-placeholder">
                    <i class="fas fa-user-graduate"></i>
                    <h3 data-i18n="student.result.defaultTitle">Ù…Ø±Ø­Ø¨Ø§Ù‹ </h3>
                    <p data-i18n="student.result.defaultMessage">Ø§Ø®ØªØ± Ø£Ø­Ø¯ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ù…Ù† Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù„Ø¹Ø±Ø¶ Ù…Ø­ØªÙˆØ§Ùƒ</p>
                </div>
    
                <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø³ÙŠØ¯Ø®Ù„ Ù‡Ù†Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹ -->
                <div id="dynamic-section-content"></div>
            </div>
        </div>
    </main>
  
    <!-- Ø§Ù„Ù…ÙˆØ¯Ø§Ù„Ø§Øª -->
    <div id="subjectModalRoot"></div>
    <div id="lectureModalRoot"></div>
    <div id="examModalRoot"></div>
    <div id="examTakeModalRoot"></div>
    <div id="resultModalRoot"></div>
    <div id="groupModalRoot"></div>
    <div id="fileModalRoot"></div>

    <!-- Ù…ÙƒØªØ¨Ø§Øª JavaScript -->
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

    <!-- Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù… -->
    <script type="module" src="theme.js"></script>
    <script type="module" src="i18n.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="student.js"></script>
    
    <!-- Ø³ÙƒØ±ÙŠØ¨Øª Ø®Ø§Øµ Ø¨Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ© -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
            setTimeout(function() {
                const loadingScreen = document.getElementById('internal-loading');
                const studentContent = document.querySelector('.student-content');
            
                if (loadingScreen) {
                    loadingScreen.style.opacity = '0';
                    loadingScreen.style.transition = 'opacity 0.5s ease';
                
                    setTimeout(function() {
                        loadingScreen.style.display = 'none';
                        if (studentContent) {
                            studentContent.style.display = 'block';
                        }
                    }, 500);
                }
            }, 1000);
        });
    </script>
    <script>
        //  Ù„ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù„ØºØ©
        document.addEventListener('DOMContentLoaded', function() {
            const languageToggle = document.getElementById('language-toggle');
            if (languageToggle) {
                // Ø¥Ø²Ø§Ù„Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ø§Ù„Ø³Ø§Ø¨Ù‚ÙŠÙ†
                languageToggle.replaceWith(languageToggle.cloneNode(true));
            
                // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ Ø¬Ø¯ÙŠØ¯ Ù…Ø¨Ø§Ø´Ø±
                document.getElementById('language-toggle').addEventListener('click', function() {
                    const currentLang = localStorage.getItem('lang') || 'ar';
                    const newLang = currentLang === 'ar' ? 'en' : 'ar';
                
                    // Ø­ÙØ¸ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
                    localStorage.setItem('lang', newLang);
                
                    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³Ù…Ø© lang Ùˆ dir
                    document.documentElement.lang = newLang;
                    document.documentElement.dir = newLang === 'ar' ? 'rtl' : 'ltr';
                
                    // ØªØ­Ø¯ÙŠØ« Ù†Øµ Ø²Ø± Ø§Ù„Ù„ØºØ©
                    const languageLabel = document.getElementById('language-label');
                    if (languageLabel) {
                        languageLabel.textContent = newLang === 'ar' ? 'English' : 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©';
                    }
                
                    // ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù†ØµÙˆØµ Ø§Ù„Ù…ØªØ±Ø¬Ù…Ø©
                    document.querySelectorAll('[data-i18n]').forEach(el => {
                        const key = el.dataset.i18n;
                        const translations = window.i18n?.translations || {};
                        const text = translations[key]?.[newLang] || el.dataset.fallback || el.textContent;
                        if (text) {
                            el.textContent = text;
                        }
                    });
                
                    // ØªØ­Ø¯ÙŠØ« placeholders
                    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                        const key = el.dataset.i18nPlaceholder;
                        const translations = window.i18n?.translations || {};
                        const text = translations[key]?.[newLang] || el.dataset.fallback || el.placeholder;
                        if (text) {
                            el.placeholder = text;
                        }
                    });
                
                    console.log('ğŸŒ ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© Ø¥Ù„Ù‰:', newLang);
                });
            }
        });
    </script>
</body>
</html>
